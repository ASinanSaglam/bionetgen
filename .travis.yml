os:
  - linux
  - osx


language: c++
python:
  - '2.7'
addons:
  apt:
    packages:
      - python-pip
sudo: false

-notifications:   
   slack: 
     rooms:
       - faederlab:l0waIGp58v8ZV74N7QmXGoWs      
     template:
       - "BioNetGen build: %{result} in %{duration}"
       - "Build: <%{build_url}|#%{build_number}> (<%{compare_url}|%{commit}>)    Author: %{author}"
       - "Build details:  %{build_url} "

script:
  - cd ./bng2
  # build NFsim (easy)
  - make NFsim
  # build atomizer (a little less easy...)
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo apt-get install -y python3-dev; fi
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo apt-get install -y python3.4-venv; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew upgrade python; fi
  - make atomizer
  # build cvode
  - cd ../Network3
  - cp Makefile.cmake Makefile
  - make
  - cd ..
  # build final distribution and validate
  - perl make_dist.pl --build --validate  --bindir ./bin
